From: Hilko Bengen <bengen@debian.org>
Date: Mon, 3 Mar 2014 08:07:36 +0000
Subject: Fix build with bytecode compiler

---
 src/Makefile.am | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/src/Makefile.am b/src/Makefile.am
index 7f99b8a..932881b 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -104,17 +104,18 @@ supermin_CFLAGS = \
 BOBJECTS = $(SOURCES_ML:.ml=.cmo)
 XOBJECTS = $(SOURCES_ML:.ml=.cmx)
 
+OCAMLPACKAGES = -package unix,str
+OCAMLFLAGS = -warn-error CDEFLMPSUVXYZ
+
 if !HAVE_OCAMLOPT
 OBJECTS = $(BOBJECTS)
 BEST    = c
+OCAMLFLAGS += -custom
 else
 OBJECTS = $(XOBJECTS)
 BEST    = opt
 endif
 
-OCAMLPACKAGES = -package unix,str
-OCAMLFLAGS = -warn-error CDEFLMPSUVXYZ
-
 supermin_DEPENDENCIES = $(OBJECTS) ext2init-bin.o
 
 supermin_LDADD = ext2init-bin.o ../lib/libgnu.a
